# Default values for barbican.
# This is a YAML-formatted file.
# Declare name/value pairs to be passed into your templates.
# name: value
#
#
global:
  image_repository: DEFINED-IN-REGION-CHART
  image_namespace: monsoon
  barbican_api_port_internal: '9292'
  dbUser: barbican
  dbPassword: DEFINED-IN-REGION-CHART
  region: staging
  tld: cloud.sap
  pgbouncer:
    enabled: true

pod:
  replicas:
    api: 2
  lifecycle:
    upgrades:
      deployments:
        revision_history: 5
        pod_replacement_strategy: RollingUpdate
        rolling_update:
           max_unavailable: 0
           max_surge: 1

image_version: DEFINED-IN-REGION-CHART
debug: "True"

pg_metrics:
  name: barbican

postgresql:
  imageTag: '9.4.14'
  postgresDatabase: barbican
  postgresPassword: DEFINED-IN-REGION-CHART
  dbInit: barbican-db-init
  dbMaintain: barbican-db-maintain
  pgbouncer:
    enabled: true
  persistence:
    enabled: true
    existingClaim: db-barbican-pvclaim
  backup:
    enabled: true
    metrics: true
    imageTag: v0.5.12
    os_password: DEFINED-IN-REGION-CHART

rabbitmq:
  users:
    default:
      password: DEFINED-IN-REGION-CHART
    admin:
      password: DEFINED-IN-REGION-CHART
  persistence:
    enabled: false
  metrics:
    password: DEFINED-IN-REGION-CHART

logging:
    formatters:
        context:
            class: oslo_log.formatters.ContextFormatter
        default:
            format: "%(message)s"
    handlers:
        stdout:
            class: StreamHandler
            formatter: context
            args: "(sys.stdout,)"
        sentry:
            class: raven.handlers.logging.SentryHandler
            level: ERROR
            args: "()"
    loggers:
        root:
            handlers: stdout, sentry
            level: WARNING
        barbican:
            handlers: stdout, sentry
            level: INFO
        eventlet.wsgi.server:
            handlers: stdout, sentry
            level: INFO

sentry:
  enabled: true
vice_president: true
